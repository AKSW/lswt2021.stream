(()=>{const e=new WebSocket("ws://localhost:5000/ws");function n(){console.log("send message");const n=t(document.getElementById("nickname-input").value),a=t(document.getElementById("message-input").value);if(""!=n.trim()&&""!=a.trim()){const t={body:a,nickname:n};return console.log(t),t&&e.send(JSON.stringify(t)),document.getElementById("message-input").value="",!1}console.log("nickname or message body not set, will not send message"),""==n.trim()&&(document.getElementById("nickname-input").required="true"),""==a.trim()&&(document.getElementById("message-input").required="true")}function t(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}e.addEventListener("message",(function(e){console.log("message received"),console.log(e),data=JSON.parse(e.data),console.log(data);let n=document.createElement("p"),t=document.createElement("span"),a=document.createElement("span"),s=document.createElement("span");t.innerHTML=data.nickname,a.innerHTML=data.time,a.setAttribute("class","date"),s.innerHTML=data.message,n.append(a),n.append(" "),n.append(t),n.append(": "),n.append(s),document.getElementById("message-box").prepend(n)})),window.isPressingEnter=function(e){let t;window.event?(t=e.keyCode,13===t&&n()):e.which&&(t=e.which,13===t&&n())},window.sendMessage=n})();